translations = {
    "uz": {
        "lang_prompt": "Tilni tanlang:",
        "welcome": "Xush kelibsiz, {name}!",
        "menu_add": "➕ O'yinni guruhingizga qo'shing",
        "menu_profile": "👤 Profil",
        "menu_news": "📰 Yangiliklar",
        "menu_rules": "📜 O'yin qoidalari",
        "menu_lang": "🌐 Til",
        "menu_back": "⬅️ Orqaga",
        "profile_text": (
            "👤 {name}\n\n"
            "💵 Dollar: {dollar}\n"
            "💎 Olmos: {diamond}\n\n"
            "🛡 Himoya: {protector}\n"
            "⛑ Qotildan himoya: {killer_protect}\n"
            "⚖️ Ovoz berishni himoya qilish: {vote_protect}\n"
            "🔫 Miltiq: {gun}\n\n"
            "🎭 Maska: {mask}\n"
            "📁 Soxta hujjat: {fake_docs}\n"
            "🃏 Keyingi o'yindagi rolingiz: {next_role}\n\n"
            "🎲 Jami o‘yindagi: {total_games}\n"
            "🎯 G‘alabalar: {wins}"
        ),
        "joined_success": "✅ Siz o‘yinga muvaffaqiyatli qo‘shildingiz, {name}!",
        "rules_text": (
            "🔵 Tinch aholi tarafdorlari\n\n"
            "1. 👨🏼 Tinch aholi\n\n"
            "Oddiy fuqaro. Maqsadi — mafiya va yakka rollarni aniqlab, kun davomida ovoz berib osishda qatnashish.\n\n"
            "2. 👨🏼‍⚕️ Shifokor\n\n"
            "Tunlari bitta o‘yinchini otishdan qutqaradi. O‘zini faqat 1 marta davolay oladi.\n\n"
            "3. 🧙🏼‍♂️ Daydi\n\n"
            "Tunda kimnidir “tunaydi”, o‘sha odamga kelganlarni ko‘radi. Qotillikka guvoh bo‘lishi mumkin.\n\n"
            "4. 🕵🏻‍♂ Komissar\n\n"
            "Mafiyani topish va ovoz berishda uni osish. 1-tunda hech kimni otolmaydi.\n\n"
            "5. 💣 Kamikaze\n\n"
            "Oddiy ko‘rinadi, lekin osilganda bir o‘yinchini o‘zi bilan olib ketadi. Uni otib qo‘ysalar — o‘q otgan ham o‘ladi.\n\n"
            "6. 💃 Mashuqa\n\n"
            "Komissar bilan tunda birga bo‘lsa, uni uxlatib qo‘yadi. Aks holda shaharni himoya qilishga yordam beradi.\n\n"
            "7. 👮🏻‍♂ Serjant\n\n"
            "Komissarga yordam beradi. Komissar o‘lsa — uning o‘rnini egallaydi.\n\n"
            "8. 👩🏻‍🏫 O‘qituvchi\n\n"
            "2 kun davomida kimnidir o‘qitadi. 3-kunda uni kuchli rolga aylantiradi (Shifokor, Serjant, Daydi, Mashuqa).\n\n"
            "9. 🧌 Suidsid\n\n"
            "Oddiy fuqarodek ko‘rinadi. Agar uni adashib osishsa — o‘yindagi barcha yutqazadi, faqat u g‘olib bo‘ladi.\n\n"
            "10. 👨🏻‍🦲 Tentak\n\n"
            "Tunda tanlagan odam Tinch aholidan bo‘lsa, uni o‘ldirishga kelganlardan bittasini (Snayperdan tashqari) o‘ldiradi.\n\n"
            "⸻\n\n"
            "🔴 Mafia tarafdorlari\n\n"
            "11. 🤵🏻 Don\n\n"
            "Mafianing boshlig‘i. Qotillikda hal qiluvchi so‘zga ega.\n\n"
            "12. 🤵🏼 Mafiya\n\n"
            "Donning buyrug‘iga amal qiladi. Don o‘lsa — boshqa mafiya uning o‘rnini egallaydi.\n\n"
            "13. 👨🏼‍💼 Advokat\n\n"
            "Komissar uni Tinch aholi deb ko‘radi. Mafiya a’zolarini yashiradi.\n\n"
            "14. 🤵🏻‍♀️ Donning xotini\n\n"
            "Tunda bir odamning rolini aniqlaydi va uni mafiya bilan bo‘lishadi.\n\n"
            "15. 👨‍🔬 Kimyogar\n\n"
            "Tunda odamga eliksir beradi: agar u mafiya bo‘lsa — davolaydi, aks holda — o‘ldiradi.\n\n"
            "⸻\n\n"
            "🟡 Betaraf va iqtisodiy rollar\n\n"
            "16. 🎁 Sotuvchi\n\n"
            "Betaraf. Tinch aholi tarafdorlarga rol, hujjat yoki himoya sotuvi orqali yordam beradi. Oxirgacha tirik qolsa — yutadi.\n\n"
            "17. 🤹🏻‍♂ Afirist\n\n"
            "Yakka rol. Tunda odamga 2 variant beradi:\n– Xursand qilish (pul oladi)\n– Jon olish (30% jonni oladi)\nAgar 2 marta rad etsa — uni o‘ldiradi.\n\n"
            "18. 🕺🏻 Majnun\n\n"
            "Tunda kimnidir tanlaydi — o‘sha odamdan Majnunga Layli sifatida harakatlar o‘tadi.\n\n"
            "⸻\n\n"
            "⚫ Yakka rollar\n\n"
            "19. 🔪 Manyak\n\n"
            "“Shahar tozalanishi kerak.” Hamma o‘lishi kerak — faqat u emas.\n\n"
            "20. ☠️ Minior\n\n"
            "Tunda bitta odamning uyiga mina qo‘yadi. O‘sha uyni tashrif buyurganlar portlaydi.\n\n"
            "21. 👨🏻‍🎤 Mergan (Snayper)\n\n"
            "Tunda otadi. Daydi ham uni ko‘ra olmaydi. Himoya ham uni to‘xtata olmaydi.\n\n"
            "22. 🔮 Muxlis\n\n"
            "Tunda kimnidir tanlaydi. U o‘lsa — Muxlis qotilga aylanadi va qasos oladi.\n\n"
            "23. 🦎 Buqalamun\n\n"
            "Tunda kimnidir tanlab, o‘sha tarafga o‘tadi:\n– Mafiya bo‘lsa → Mafiya\n– Tinch bo‘lsa → Serjant\n– Yakka bo‘lsa → Manyakka aylanadi\n\n"
            "24. 🥷🏻 O‘g‘ri\n\n"
            "Yakka rol. U tunda tanlagan odamida aktiv rol bo‘lsa, uni o‘ziniki qilib oladi va jabrlanuvchi Tentakka aylanadi."
        )
    },
    "ru": {
        "lang_prompt": "Выберите язык:",
        "welcome": "Добро пожаловать, {name}!",
        "menu_add": "➕ Добавить игру в группу",
        "menu_profile": "👤 Профиль",
        "menu_news": "📰 Новости",
        "menu_rules": "📜 Правила игры",
        "menu_lang": "🌐 Язык",
        "menu_back": "⬅️ Назад",
        "profile_text": (
            "👤 {name}\n\n"
            "💵 Доллар: {dollar}\n"
            "💎 Алмаз: {diamond}\n\n"
            "🛡 Защита: {protector}\n"
            "⛑ Защита от убийцы: {killer_protect}\n"
            "⚖️ Защита голоса: {vote_protect}\n"
            "🔫 Оружие: {gun}\n\n"
            "🎭 Маска: {mask}\n"
            "📁 Фальшивые док-ты: {fake_docs}\n"
            "🃏 Роль в следующей игре: {next_role}\n\n"
            "🎲 Всего игр: {total_games}\n"
            "🎯 Побед: {wins}"
        ),
        "joined_success": "✅ Вы успешно присоединились к игре, {name}!",
        "rules_text": (
            "🔵 Сторонники мирных жителей\n\n"
            "1. 👨🏼 Мирный житель\n\n"
            "Обычный гражданин. Цель — вычислить мафию и одиночные роли, голосовать за их повешение днём.\n\n"
            "2. 👨🏼‍⚕️ Доктор\n\n"
            "Ночью спасает одного игрока от убийства. Себя может лечить только 1 раз.\n\n"
            "3. 🧙🏼‍♂️ Бродяга\n\n"
            "Ночью «ночует» у кого-то, видит тех, кто к нему пришёл. Может стать свидетелем убийства.\n\n"
            "4. 🕵🏻‍♂ Комиссар\n\n"
            "Ищет мафию и помогает в её повешении. В первую ночь никого не может убить.\n\n"
            "5. 💣 Камикадзе\n\n"
            "Выглядит обычным. При повешении уносит с собой одного игрока. Если его убьют — умирает и убийца.\n\n"
            "6. 💃 Любовница\n\n"
            "Если ночью с комиссаром — усыпляет его. Иначе помогает защищать город.\n\n"
            "7. 👮🏻‍♂ Сержант\n\n"
            "Помогает комиссару. Если комиссар умирает — заменяет его.\n\n"
            "8. 👩🏻‍🏫 Учитель\n\n"
            "Обучает игрока 2 дня. На 3-й день превращает его в сильную роль (Доктор, Сержант, Бродяга, Любовница).\n\n"
            "9. 🧌 Суицидник\n\n"
            "Выглядит как мирный. Если его повесить по ошибке — выигрывает только он, остальные проигрывают.\n\n"
            "10. 👨🏻‍🦲 Дурак\n\n"
            "Если ночью выберет мирного — убивает одного из тех, кто пришёл его убивать (кроме снайпера).\n\n"
            "⸻\n\n"
            "🔴 Сторонники мафии\n\n"
            "11. 🤵🏻 Дон\n\n"
            "Глава мафии. Имеет решающее слово в убийствах.\n\n"
            "12. 🤵🏼 Мафиози\n\n"
            "Подчиняется дону. Если дон умирает — другой мафиози занимает его место.\n\n"
            "13. 👨🏼‍💼 Адвокат\n\n"
            "Комиссар видит его как мирного. Помогает скрыть мафию.\n\n"
            "14. 🤵🏻‍♀️ Жена дона\n\n"
            "Ночью узнаёт роль одного игрока и сообщает мафии.\n\n"
            "15. 👨‍🔬 Химик\n\n"
            "Дает эликсир: если игрок — мафия, лечит, иначе — убивает.\n\n"
            "⸻\n\n"
            "🟡 Нейтральные и экономические роли\n\n"
            "16. 🎁 Продавец\n\n"
            "Нейтрален. Продаёт роли, документы или защиту. Если доживает до конца — выигрывает.\n\n"
            "17. 🤹🏻‍♂ Аферист\n\n"
            "Одиночка. Даёт 2 варианта:\n– Порадовать (получает деньги)\n– Забрать жизнь (отнимает 30%)\nЕсли 2 раза откажутся — убивает.\n\n"
            "18. 🕺🏻 Безумец\n\n"
            "Выбирает игрока, через которого совершает действия как Лейли.\n\n"
            "⸻\n\n"
            "⚫ Одиночные роли\n\n"
            "19. 🔪 Маньяк\n\n"
            "“Город должен очиститься.” Все должны умереть — кроме него.\n\n"
            "20. ☠️ Минёр\n\n"
            "Ставит мину в дом игрока. Те, кто туда зайдёт — подрываются.\n\n"
            "21. 👨🏻‍🎤 Снайпер\n\n"
            "Стреляет ночью. Даже Бродяга его не видит. Защита не спасает от него.\n\n"
            "22. 🔮 Фанат\n\n"
            "Выбирает игрока. Если тот умрёт — становится убийцей и мстит.\n\n"
            "23. 🦎 Хамелеон\n\n"
            "Выбирает сторону:\n– Мафия → становится мафией\n– Мирный → становится сержантом\n– Одиночка → становится маньяком\n\n"
            "24. 🥷🏻 Вор\n\n"
            "Одиночка. Если выберет игрока с активной ролью — крадёт её. Тот становится Дураком."
        )
    }
}


def t(key: str, lang: str = "uz", **kwargs) -> str:
    """
    Tarjima va formatlash.
    key: tarjima kaliti, lang: 'uz' yoki 'ru'.
    kwargs: matn ichidagi o'zgaruvchilar
    """
    text = translations.get(lang, translations["uz"]).get(key, key)
    return text.format(**kwargs)
